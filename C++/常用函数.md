[toc]

### 1、`snprintf`函数

**（1）描述**

- 将可变参数(...)按照 format 格式化成字符串，并将字符串复制到 str 中，size 为要写入的字符的最大数目，超过 size 会被截断

**（2）声明**

- `int snprintf ( char * str, size_t size, const char * format, ... );`

  参数

  - `**str**` -- 目标字符串
  - `**size**` -- 拷贝字节数(Bytes)
  - `**format**` -- 格式化成字符串
  - `**...**` -- 可变参数

**（3）返回值**

- 如果格式化后的字符串长度小于size，则会把字符串全部复制到str中，并给其后添加一个字符串结束符`\0`；
- 如果格式化后的字符串长度大于size，超过size的部分会被截断，只将其中的（size-1）个字符复制到`str`中，并给其后添加一个字符串结束符`\0`，返回值为欲写入的字符串长度

### 2、`strncasecmp`函数

**（1）描述**

- 用来比较字符串的前n个字符，比较时会自动忽略大小写差异

**（2）声明**

- `int strncasecmp(const char *s1, const char *s2, size_t n);`

  参数

  - `n`表示需要比较的字符个数

**（3）返回值**

- 若参数s1和s2字符串相同则返回0；
- 若参数s1大于s2则返回大于0的值；
- 若参数s1小于s2则返回小于0的值；

### 3、`assert`函数

`assert`宏的原型定义在`assert.h`头文件中

**（1）描述**

- `assert`的作用是先计算表达式`expression`，如果其值为假（即为0），那么它先向`stderr`打印一条出错信息，然后通过调用`abort`来终止程序运行

**（2）使用与注意**

- 在函数开始处检验传入参数的合法性
- 每个`assert`只检验一个条件，因为同时检验多个条件时，如果断言失败，无法直观的判断是哪个条件失败
- 不能使用改变环境的语句，因为`assert`只在`DEBUG`个生效，如果这么做，会使用程序在真正运行时遇到问题
- `assert`和后面的语句应空一行，以形成逻辑和视觉上的一致感
- `assert`是用来避免显而易见的错误的，而不是处理异常的。错误和异常是不一样的，错误是不应该出现的，异常是不可避免的

### 4、`c_str()`函数

c语言中没有string类型，必须通过string类对象的成员函数c_str()把string 对象转换成c中的字符串样式

**（1）原型**

- `const char *c_str();`

**（2）使用与注意**

- c_str是一个内容为字符串指向字符数组的临时指针； 
- c_str返回的是一个可读不可改的常指针；
- 一定要使用`strcpy()`、`strcmp()`函数等来操作方法c_str()返回的指针 

**（3）返回值**

- `c_str()`函数返回一个指向正规C字符串的指针常量，内容与当前string相同

### 5、获取当前时间函数

头文件：`#include <time.h>`

#### （1）结构体`tm`

- ```
  struct tm 
  { 　
  	int tm_sec;		 			  /* 秒 [0, 60] */ 　　
  	int tm_min; 	   	 		/* 分 [0, 59] */ 　　
  	int tm_hour; 	  			/* 时 [0, 23] */ 　　
  	int tm_mday;     		  /* 日 [1, 31] */ 　
  	int tm_mon;		  			/* 月 [0, 11]，0代表一月  */ 
  	int tm_year; 	    		  /* 年 [1900, ...] */ 　
  	int tm_wday; 	  			/* 星期 [0, 6]，0代表星期天 */ 　
  	int tm_yday; 	   			 /* 一年中的天数 [0, 365]，0代表1月1日 */ 　
  	int tm_isdst; 	    			/* 夏令时标识符 [-1/0/1]，-1不清楚，0不实行夏令，1实行夏令*/ 　
  	long int tm_gmtoff;	 	/*Seconds east of UTC*/ 
  	const char *tm_zone;  /*当前时区的名字(与环境变量TZ有关)*/ 　
  }；
  ```

#### （2）`time()`函数

- **定义**

  `time_t time(time_t *t);`

- **说明**

  返回从1970年1月1日的UTC时间从0时0分0秒算起到现在所经过的秒数。若指针t不是非空指针，会将返回值存到指针t所指的内存

- **例**

  `time_t currentTime = time((time_t*)NULL);`

#### （3）`localtime_r()`函数

localtime_r 是可重入函数，线程安全

- **定义**

  `struct tm *localtime_r(const time_t *timep, struct tm *result);`

- **说明**

  将系统偏移秒数转化为当前时间，并存在result中

#### （4）`asctime()`函数

- **定义**

  `char *asctime(const struct tm *timeptr);`

- **参数**

  `timeptr`是指向`tm`结构的指针

- **返回值**

  返回一个 C 字符串，包含了可读格式的日期和时间信息 **Www Mmm dd hh:mm:ss yyyy**

  - `Www`表示星期几
  - `Mmm`是以字母表示的月份
  - `dd`表示一月中的第几天
  - `hh:mm:ss`表示时间
  - `yyyy`表示年份

#### （5）例

```
time_t currentTime = time((time_t*)NULL);
struct tm timePtr;
localtime_r(&currentTime, &timePtr);
// 年：timePtr.tm_year + 1900；月：ptitimePtrme.tm_mon + 1
```



