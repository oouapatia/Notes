GCC/G++编译参数



#### 1、GCC、cc、g++、gcc的区别

- GCC:GNU Compiler Collection(GUN 编译器集合)，它可以编译C、C++、JAV、Fortran、Pascal、Object-C、Ada等语言。

- gcc是GCC中的GUN C Compiler（C 编译器）

- g++是GCC中的GUN C++ Compiler（C++编译器）
- cc来自于Unix的c语言编译器，Linux下没有cc的

#### 2、`-fPIC`

- 该选项用于生成位置无关的代码

#### 3、`-shared`

- 将-fPIC生成的==位置==无关的代码作为动态库，一般-fPIC和-shared都是一起使用。生成SO文件，共享库

#### 4、`-static`

- 此选项将禁止使用动态库，故编译出来的东西一般都很大，不需要动态连接库，就可以运行

#### 5、`-E`

- 指示编译器仅对输入文件进行预处理。当这个选项被使用时*,* 预处理器的输出被送到标准输出而不是储存在文件里

#### 6、`-S`

- 告诉 `GCC` 在为 `C` 代码产生了汇编语言文件后停止编译。 `GCC` 产生的汇编语言文件的缺省扩展名是`.s`

#### 7、`-c`

- 告诉 `GCC` 仅把源代码编译为目标代码。缺省时 `GCC`建立的目标代码文件有一个 `.o` 的扩展名

#### 8、`-o`

- 为将产生的可执行文件用指定的文件名。

#### 9、`-O`

- 告诉 GCC 对源代码进行基本优化。这些优化在大多数情况下都会使程序执行的更快。 *-O2* 选项告诉GCC 产生尽可能小和尽可能快的代码。 如-O~2~，-O~3~，-O~n~（*n* 常为*0--3*）；

  - -O主要进行跳转和延迟退栈两种优化；
  - -O~2~ 除了完成-O~1~的优化之外，还进行一些额外的调整工作，如指令调整等。
  - -O~3~则包括循环展开和其他一些与处理特性相关的优化工作。
  - 选项将使编译的速度比使用 *-O* 时慢， 但通常产生的代码执行速度会更快。


#### 10、调试选项`-g`和`-pg`

GCC 支持数种调试和剖析选项，常用到的是 `-g` 和 `-pg` 。

- -g选项告诉 *GCC* 产生能被 *GNU* 调试器使用的调试信息以便调试你的程序。*GCC* 提供了一个很多其他 *C* 编译器里没有的特性*,* 在 *GCC* 里你能使*-g* 和 *-O (*产生优化代码*)*联用。

- -pg选项告诉 *GCC* 在编译好的程序里加入额外的代码。运行程序时*,* 产生 *gprof* 用的剖析信息以显示你的程序的耗时情况。

#### 11、`-l`和`-L`

- `-l`参数就是用来指定程序要链接的库，`-l`参数紧接着就是库名，那么库名跟真正的库文件名有什么关系呢？就拿数学库来说，他的库名是`m`，他的库文件名是`libm.so`，很容易看出，把库文件名的头`lib`和尾`.so`去掉就是库名了。
  - 放在`/lib`和`/usr/lib`和`/usr/local/lib`里的库直接用`-l`参数就能链接
  - 如果库文件没放在这三个目录里，而是放在其他目录里，这时我们只用`-l`参数的话，链接还是会出错，出错信息大概是：`/usr/bin/ld: cannot find -lxxx`

- `-L`参数跟着的是库文件所在的目录名，引用其他目录下的库文件

#### 12、`-include`和`-I`

- -include用来包含头文件，一般情况下包含头文件都在源码里用`＃include xxxxxx`实现

- `-I`参数是用来指定头文件目录
  - `-I`参数可以用相对路径，比如头文件在当前目录，可以用`-I.`来指定
  - `--cflags`参数就是用来生成`-I`参数的

#### 13、`-Wall`、`-w` 和`-v`

- `-Wall` 打印出`gcc`提供的警告信息

- `-w` 关闭所有警告信息

- `-v` 列出所有编译步骤

#### 14、几个相关的环境变量

- `PKG_CONFIG_PATH`：用来指定pkg-config用到的pc文件的路径，默认是/usr/lib/pkgconfig，pc文件是文本文件，扩展名是.pc，里面定义开发包的安装路径，Libs参数和Cflags参数等等。
- `CC`：用来指定`c`编译器。
- `CXX`：用来指定`cxx`编译器。
- `LIBS`：跟上面的`--libs`作用差不多。
- `CFLAGS`：跟上面的`--cflags`作用差不多。????????

- 环境变量设定方法：`export ENV_NAME=xxxxxxxxxxxxxxxxx`
