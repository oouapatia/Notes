> 预处理器是一些指令，指示编译器在实际编译之前需要完成的预处理
>
> 所有的预处理指令都是`#`开头，只有空格字符可以出现在预处理指令之前。预处理指令不是C++语句



[toc]

### 1、条件编译

- 有选择地对部分程序源码进行编译

- 条件预处理：

  ```
  #ifdef
  #endif
  ```

- 只在调试时进行编译

  ```
  #ifdef DEBUG
  	cout <<  ...
  #endif
  ```

  如果在`#if DEBUG`之前已经定义了符号常量`DEBUG`，则会对程序中的`cout`语句进行编译

- 使用`#if 0`语句注释程序的一部分

  ```
  #if 0
  	// 不进行编译的代码
  #endif
  ```

### 2、`#` 与 `##` 运算符

`#define text replace-text`

- `#`：字符串化的意思，出现在宏定义中的`#`是把跟在后面的参数转化成一个字符串

  > - 宏定义参数的左右两边的空格会被忽略，参数的各个Token之间的多个空格会被转换成一个空格
  > -  宏定义参数中含有需要特殊含义字符如`"` 或 `\`时，它们前面会自动被加上转义字符 `\`

  - `#define STR(x) #x`

  - `#`会将`replace-text`令牌转换为用引号括起来的字符串

  **例：**

  ```
  STR(hello) ==> "hello"
  ```

- `##`：连接符号，把参数连在一起，将多个 Token 连接成一个 Token

  > - 它不能是宏定义中的第一个或最后一个 Token
  > - 前后的空格可有可无

  - `#define CONTACT(x, y) x##y`

  - `##`运算符用于连接两个令牌

  **例：**

  ```
  int xy = 100;
  cout << CONTACT(x, y) ==> cout << xy;
  ```

### 3、预定义宏

| 宏         | 描述                                                         |
| ---------- | ------------------------------------------------------------ |
| `__LINE__` | 这会在程序编译时包含当前行号                                 |
| `__FILE__` | 这会在程序编译时包含当前文件名                               |
| `__DATE__` | 这会包含一个形为`month/day/year`的字符串，它表示把源文件转化为目标代码的日期 |
| `__TIME__` | 这会包含一个形为`hour:minute:second`的字符串，它表示程序被编译的时间 |



